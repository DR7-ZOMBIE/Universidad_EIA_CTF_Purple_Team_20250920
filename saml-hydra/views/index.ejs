<% layout('layout') %>

<section class="grid lg:grid-cols-2 gap-10 items-center">
  <div class="space-y-6">
    <h1 class="text-4xl lg:text-5xl font-bold leading-tight">
      Assertion of Many Heads
    </h1>
    <p class="text-white/80">
      Esta aplicación usa SAML, lo convierte a JSON y luego emite JWT.
      Hay muchas “cabezas” firmando… y una verdad que se escapa.
    </p>

    <div class="glass rounded-2xl p-6">
      <h2 class="font-semibold mb-3">SSO ACS (para pegar tu SAMLResponse)</h2>
      <form method="post" action="/sso/acs" class="space-y-3">
        <textarea name="SAMLResponse" class="w-full h-36 rounded-lg p-3 bg-black/30 border border-white/10"
          placeholder="Pega tu SAMLResponse (Base64)"></textarea>
        <div class="flex items-center gap-3">
          <label class="text-sm text-white/70">alg (opcional):</label>
          <select name="alg" class="bg-black/30 border border-white/10 rounded-lg px-3 py-1.5">
            <option value="">(por defecto RS256)</option>
            <option value="HS256">HS256 (alg confusion)</option>
            <option value="none">'none' (sin firma)</option>
          </select>
        </div>
        <button class="px-4 py-2 rounded-lg bg-emerald-500 hover:bg-emerald-400 text-black font-semibold">
          Enviar al ACS
        </button>
        <% if (!user) { %>
          <p class="text-xs text-white/60 mt-2">
            Pistas públicas en <code>/static/certs/</code>. La cookie <code>hydra_session</code> es legible por JS.
          </p>
        <% } %>
      </form>
    </div>
  </div>

  <div class="relative">
    <div class="absolute -inset-4 shine rounded-3xl opacity-30"></div>
    <div class="glass rounded-3xl p-8 relative">
      <img src="/static/hero.svg" class="w-full" alt="hydra hero" />
      <div class="mt-6 text-sm text-white/80">
        Conéctate. Analiza el flujo. Encuentra la cabeza que miente.
      </div>
      <div class="mt-4 flex gap-3">
        <% if (user) { %>
          <a class="px-4 py-2 rounded-lg bg-sky-400 hover:bg-sky-300 text-black font-semibold" href="/dashboard">Ir al panel</a>
        <% } else { %>
          <span class="px-4 py-2 rounded-lg bg-white/10 border border-white/10">No autenticado</span>
        <% } %>
      </div>
    </div>
  </div>
</section>
